        -:    0:Source:ttt.c
        -:    0:Graph:ttt.gcno
        -:    0:Data:ttt.gcda
        -:    0:Runs:19
        -:    1:#include <stdio.h>
        -:    2:#include <string.h>
        -:    3:#include <stdlib.h>
        -:    4:#include <ctype.h>
        -:    5:
        -:    6:#define MAX_NUMS 9
        -:    7:
       19:    8:int validate_strategy(const char *strategy) {
       19:    9:    if (strlen(strategy) != MAX_NUMS) {
    #####:   10:        return 1;
        -:   11:    }
        -:   12:
      154:   13:    for (int i = 0; i < MAX_NUMS; i++) {
      141:   14:        if (strategy[i] < '1' || strategy[i] > '9') {
    #####:   15:            return 1;
        -:   16:        }
        -:   17:        
      639:   18:        for (int j = i - 1; j >= 0; j--) {
      504:   19:            if (strategy[i] == strategy[j]) {
        6:   20:                return 1;
        -:   21:            }
        -:   22:        }
        -:   23:    }
        -:   24:
       13:   25:    return 0;
        -:   26:}
        -:   27:
      113:   28:int validate_move(int player_move, const char *board){
       89:   29:    return(board[player_move - 1] == 'O' || board[player_move - 1] == 'X'||
      202:   30:            player_move < 1 || player_move > MAX_NUMS);
        -:   31:    }
        -:   32:
       30:   33:char next_move(const char *strategy, const char *board) {
        -:   34:    
       87:   35:    for(int i = 0; i < MAX_NUMS; i++){
       87:   36:        if(!validate_move((strategy[i]- '0'), board)){
       30:   37:            return strategy[i];
        -:   38:        }
        -:   39:    }
        -:   40:    
    #####:   41:    return '\0';
        -:   42:}
        -:   43:
       48:   44:int check_winner(const char *board, char player) {
       48:   45:    const int winning_combinations[8][3] = {
        -:   46:        {0, 1, 2}, {3, 4, 5}, {6, 7, 8}, // rows
        -:   47:        {0, 3, 6}, {1, 4, 7}, {2, 5, 8}, // columns
        -:   48:        {0, 4, 8}, {2, 4, 6}             // diagonals
        -:   49:    };
      423:   50:    for (int i = 0; i < 8; ++i) {
      377:   51:        if (board[winning_combinations[i][0]] == player &&
      137:   52:            board[winning_combinations[i][1]] == player &&
       26:   53:            board[winning_combinations[i][2]] == player) {
        2:   54:            return 1;
        -:   55:        }
        -:   56:    }
       46:   57:    return 0;
        -:   58:}
        -:   59:
       19:   60:int main(int argc, char *argv[]) 
        -:   61:{
        -:   62:    char board[10];
       19:   63:    if (argc != 2) {
    #####:   64:        printf("Error\n");
    #####:   65:        return 1;
        -:   66:    }
        -:   67:
       19:   68:    const char *strategy = argv[1];
       19:   69:    if (validate_strategy(strategy)) {
        6:   70:        printf("Error\n");
        6:   71:        return 1;
        -:   72:    }
        -:   73:    
       13:   74:    int round = 0;
       31:   75:    while (round < 4) {
       30:   76:        char move = next_move(strategy, board);
       30:   77:        if (move == '\0') {
    #####:   78:            printf("Error\n");
      12*:   79:            return 1;
        -:   80:        }
       30:   81:        fprintf(stdout,"%c\n", move);
        -:   82:
       30:   83:        board[move - '1'] = 'X';
       30:   84:        if (check_winner(board, 'X')) {
        2:   85:            printf("I win\n");
        2:   86:            return 0;
        -:   87:        }
        -:   88:
        -:   89:        // Read player's move
        -:   90:        int player_move;
       28:   91:        if (scanf("%d", &player_move) != 1 || validate_move(player_move, board)) {
       10:   92:            printf("Error4\n");
       10:   93:            return 1;
        -:   94:        }
       18:   95:        board[player_move - 1] = 'O';
        -:   96:
       18:   97:        if (check_winner(board, 'O')) {
    #####:   98:            printf("I lose\n");
    #####:   99:            return 0;
        -:  100:        }
       18:  101:        round++;
        -:  102:    }
        1:  103:    printf("Draw");
        1:  104:    return 0;
        -:  105:}
